// Translation data
const translations = {
    english: {
        // Header
        "contact": "Contact",
        "b2b_agent_login": "B2B Agent Login",
        "sign_in_register": "Sign in/Register",
        
        // Booking tabs
        "flight": "Flight",
        "hotel": "Hotel", 
        "tour": "Tour",
        "visa": "Visa",
        
        // Trip types
        "one_way": "One Way",
        "round_way": "Round Way",
        "multi_city": "Multi City",
        
        // Form labels
        "from": "FROM",
        "to": "TO",
        "journey_date": "JOURNEY DATE",
        "return_date": "RETURN DATE",
        "traveler_class": "TRAVELER, CLASS",
        "city_hotel_resort_area": "CITY/HOTEL/RESORT/AREA",
        "check_in": "CHECK IN",
        "check_out": "CHECK OUT",
        "rooms_guests": "ROOMS & GUESTS",
        
        // Form values
        "dhaka": "Dhaka",
        "coxs_bazar": "Cox's Bazar",
        "dac_airport": "DAC, Hazrat Shahjalal International Ai...",
        "cxb_airport": "CXB, Cox's Bazar Airport",
        "wednesday": "Wednesday",
        "thursday": "Thursday",
        "friday": "Friday",
        "save_more_return": "Save more on return flight",
        "traveler": "Traveler",
        "economy": "Economy",
        "room_guests": "Room, Guests",
        "adults": "Adults",
        "bangladesh": "Bangladesh",
        
        // Search for options
        "search_for": "Search for",
        "business": "Business",
        "couples": "Couples",
        "families": "Families",
        "friends": "Friends",
        "solo": "Solo",
        
        // Buttons
        "search": "Search",
        "learn_more": "Learn More",
        "apply": "Apply",
        "send_message": "Send Message",
        
        // Account slider
        "how_book_flight": "How to book a flight?",
        "how_book_hotel": "How to book a hotel?",
        "how_get_discount": "How to get a discount?",
        "how_create_account": "How to create an account?",
        "watch": "▷ Watch",
        
        // Hot deals
        "hot_deals": "Hot Deals",
        "all": "All",
        "others": "Others",
        "up_to_18_discount": "Up to 18% Discount*",
        "up_to_14_discount": "Up to 14% Discount*",
        "up_to_bdt_4000_cashback": "Up to BDT 4,000 Cashback*",
        "discount_intl_flight": "Up to 18% Discount on Int'l Flight Bookings",
        "on_base_fare_city_bank": "On base fare, for City Bank American Express Platinum & Gold credit cards. Till 31 Dec'25.",
        "on_intl_flight_bookings": "On Int'l Flight Bookings",
        "on_base_fare_ebl": "On base fare, for all EBL Visa credit cards. Till 5 August 2025.",
        "on_bkash_payments": "On bKash Payments",
        "up_to_bdt_4000_cashback_bkash": "Up to BDT 4,000 Cashback for bKash payments. Till 31 July 2025.",
        
        // Services
        "our_services": "Our Services",
        "flight_booking": "Flight Booking",
        "best_deals_flights": "Best deals on domestic and international flights.",
        "hotel_reservations": "Hotel Reservations",
        "comfortable_stays": "Comfortable stays at top-rated hotels worldwide.",
        "tour_packages": "Tour Packages",
        "customizable_tour_packages": "Customizable tour packages for every traveler.",
        "visa_assistance": "Visa Assistance",
        "expert_help_visa": "Expert help with visa applications and documentation.",
        "hajj_umrah": "Hajj & Umrah",
        "complete_hajj_umrah": "Complete Hajj and Umrah packages with spiritual guidance.",
        "student_visa_consultancy": "Student Visa Consultancy",
        "professional_guidance_student": "Professional guidance for student visa applications worldwide.",
        "work_visa_process": "Work Visa Process",
        "comprehensive_work_visa": "Comprehensive work visa services for international employment.",
        
        // Destinations
        "popular_destinations": "Popular Destinations",
        "paris": "Paris",
        "maldives": "Maldives",
        "dubai": "Dubai",
        "bangkok": "Bangkok",
        
        // Contact
        "contact_us": "Contact Us",
        "your_name": "Your Name",
        "your_email": "Your Email",
        "your_message": "Your Message",
        
        // Footer
        "discover": "Discover",
        "home": "Home",
        "terms": "Terms",
        "talent_culture": "Talent & Culture",
        "about_us": "About Us",
        "refund_policy": "Refund Policy",
        "emi_policy": "EMI Policy",
        "privacy_policy": "Privacy Policy",
        "payment_methods": "Payment Methods",
        "need_help": "Need Help?",
        "here_24_7": "We're here for you 24/7! Reach out to us through Messenger or call anytime, day or night, for the support you need.",
        "experience_center": "Experience Center",
        "experience_center_address": "Sheltech Ayaan, House 58, Road 6 & 11, Block C, Level 2, Banani, Dhaka",
        "contact": "Contact",
        "copyright": "Copyright Zahid International Ltd."
    },
    
    bengali: {
        // Header
        "contact": "যোগাযোগ",
        "b2b_agent_login": "বি২বি এজেন্ট লগইন",
        "sign_in_register": "সাইন ইন/রেজিস্টার",
        
        // Booking tabs
        "flight": "ফ্লাইট",
        "hotel": "হোটেল",
        "tour": "ট্যুর",
        "visa": "ভিসা",
        
        // Trip types
        "one_way": "একমুখী",
        "round_way": "দুইমুখী",
        "multi_city": "মাল্টি সিটি",
        
        // Form labels
        "from": "থেকে",
        "to": "যাওয়া",
        "journey_date": "যাত্রার তারিখ",
        "return_date": "ফেরার তারিখ",
        "traveler_class": "যাত্রী, ক্লাস",
        "city_hotel_resort_area": "শহর/হোটেল/রিসোর্ট/এলাকা",
        "check_in": "চেক ইন",
        "check_out": "চেক আউট",
        "rooms_guests": "রুম ও অতিথি",
        
        // Form values
        "dhaka": "ঢাকা",
        "coxs_bazar": "কক্সবাজার",
        "dac_airport": "ডিএসি, হযরত শাহজালাল আন্তর্জাতিক বিমানবন্দর...",
        "cxb_airport": "সিএক্সবি, কক্সবাজার বিমানবন্দর",
        "wednesday": "বুধবার",
        "thursday": "বৃহস্পতিবার",
        "friday": "শুক্রবার",
        "save_more_return": "ফেরার ফ্লাইটে আরও সঞ্চয় করুন",
        "traveler": "যাত্রী",
        "economy": "ইকোনমি",
        "room_guests": "রুম, অতিথি",
        "adults": "প্রাপ্তবয়স্ক",
        "bangladesh": "বাংলাদেশ",
        
        // Search for options
        "search_for": "অনুসন্ধান করুন",
        "business": "ব্যবসা",
        "couples": "দম্পতি",
        "families": "পরিবার",
        "friends": "বন্ধু",
        "solo": "একাকী",
        
        // Buttons
        "search": "অনুসন্ধান",
        "learn_more": "আরও জানুন",
        "apply": "প্রয়োগ করুন",
        "send_message": "বার্তা পাঠান",
        
        // Account slider
        "how_book_flight": "কিভাবে ফ্লাইট বুক করবেন?",
        "how_book_hotel": "কিভাবে হোটেল বুক করবেন?",
        "how_get_discount": "কিভাবে ডিসকাউন্ট পাবেন?",
        "how_create_account": "কিভাবে একাউন্ট তৈরি করবেন?",
        "watch": "▷ দেখুন",
        
        // Hot deals
        "hot_deals": "হট ডিল",
        "all": "সব",
        "others": "অন্যান্য",
        "up_to_18_discount": "১৮% পর্যন্ত ছাড়*",
        "up_to_14_discount": "১৪% পর্যন্ত ছাড়*",
        "up_to_bdt_4000_cashback": "৪,০০০ টাকা পর্যন্ত ক্যাশব্যাক*",
        "discount_intl_flight": "আন্তর্জাতিক ফ্লাইট বুকিংয়ে ১৮% পর্যন্ত ছাড়",
        "on_base_fare_city_bank": "বেস ফেয়ারে, সিটি ব্যাংক আমেরিকান এক্সপ্রেস প্ল্যাটিনাম ও গোল্ড ক্রেডিট কার্ডের জন্য। ৩১ ডিসেম্বর '২৫ পর্যন্ত।",
        "on_intl_flight_bookings": "আন্তর্জাতিক ফ্লাইট বুকিংয়ে",
        "on_base_fare_ebl": "বেস ফেয়ারে, সব ইবিএল ভিসা ক্রেডিট কার্ডের জন্য। ৫ আগস্ট ২০২৫ পর্যন্ত।",
        "on_bkash_payments": "বিকাশ পেমেন্টে",
        "up_to_bdt_4000_cashback_bkash": "বিকাশ পেমেন্টে ৪,০০০ টাকা পর্যন্ত ক্যাশব্যাক। ৩১ জুলাই ২০২৫ পর্যন্ত।",
        
        // Services
        "our_services": "আমাদের সেবা",
        "flight_booking": "ফ্লাইট বুকিং",
        "best_deals_flights": "দেশীয় ও আন্তর্জাতিক ফ্লাইটে সেরা ডিল।",
        "hotel_reservations": "হোটেল রিজার্ভেশন",
        "comfortable_stays": "বিশ্বব্যাপী শীর্ষস্থানীয় হোটেলে আরামদায়ক থাকা।",
        "tour_packages": "ট্যুর প্যাকেজ",
        "customizable_tour_packages": "প্রতিটি ভ্রমণকারীর জন্য কাস্টমাইজযোগ্য ট্যুর প্যাকেজ।",
        "visa_assistance": "ভিসা সহায়তা",
        "expert_help_visa": "ভিসা আবেদন ও নথি প্রক্রিয়ায় বিশেষজ্ঞ সহায়তা।",
        "hajj_umrah": "হজ ও উমরাহ",
        "complete_hajj_umrah": "আধ্যাত্মিক নির্দেশনাসহ সম্পূর্ণ হজ ও উমরাহ প্যাকেজ।",
        "student_visa_consultancy": "ছাত্র ভিসা পরামর্শ",
        "professional_guidance_student": "বিশ্বব্যাপী ছাত্র ভিসা আবেদনের জন্য পেশাদার নির্দেশনা।",
        "work_visa_process": "কর্ম ভিসা প্রক্রিয়া",
        "comprehensive_work_visa": "আন্তর্জাতিক কর্মসংস্থানের জন্য বিস্তৃত কর্ম ভিসা সেবা।",
        
        // Destinations
        "popular_destinations": "জনপ্রিয় গন্তব্য",
        "paris": "প্যারিস",
        "maldives": "মালদ্বীপ",
        "dubai": "দুবাই",
        "bangkok": "ব্যাংকক",
        
        // Contact
        "contact_us": "যোগাযোগ করুন",
        "your_name": "আপনার নাম",
        "your_email": "আপনার ইমেইল",
        "your_message": "আপনার বার্তা",
        
        // Footer
        "discover": "আবিষ্কার করুন",
        "home": "হোম",
        "terms": "শর্তাবলী",
        "talent_culture": "প্রতিভা ও সংস্কৃতি",
        "about_us": "আমাদের সম্পর্কে",
        "refund_policy": "ফেরত নীতি",
        "emi_policy": "ইএমআই নীতি",
        "privacy_policy": "গোপনীয়তা নীতি",
        "payment_methods": "পেমেন্ট পদ্ধতি",
        "need_help": "সাহায্য প্রয়োজন?",
        "here_24_7": "আমরা আপনার জন্য ২৪/৭ এখানে আছি! মেসেঞ্জার বা কলের মাধ্যমে আমাদের সাথে যোগাযোগ করুন, দিনরাত যেকোনো সময়, আপনার প্রয়োজনীয় সহায়তার জন্য।",
        "experience_center": "অভিজ্ঞতা কেন্দ্র",
        "experience_center_address": "শেলটেক আইয়ান, বাড়ি ৫৮, রোড ৬ ও ১১, ব্লক সি, লেভেল ২, বনানী, ঢাকা",
        "contact": "যোগাযোগ",
        "copyright": "কপিরাইট জাহিদ ইন্টারন্যাশনাল লিমিটেড।"
    },
    
    arabic: {
        // Header
        "contact": "اتصل بنا",
        "b2b_agent_login": "تسجيل دخول وكيل B2B",
        "sign_in_register": "تسجيل الدخول/التسجيل",
        
        // Booking tabs
        "flight": "رحلة جوية",
        "hotel": "فندق",
        "tour": "جولة",
        "visa": "تأشيرة",
        
        // Trip types
        "one_way": "ذهاب",
        "round_way": "ذهاب وعودة",
        "multi_city": "مدن متعددة",
        
        // Form labels
        "from": "من",
        "to": "إلى",
        "journey_date": "تاريخ الرحلة",
        "return_date": "تاريخ العودة",
        "traveler_class": "المسافر، الفئة",
        "city_hotel_resort_area": "المدينة/الفندق/المنتجع/المنطقة",
        "check_in": "تسجيل الوصول",
        "check_out": "تسجيل المغادرة",
        "rooms_guests": "الغرف والضيوف",
        
        // Form values
        "dhaka": "دكا",
        "coxs_bazar": "كوكس بازار",
        "dac_airport": "DAC، مطار شاه جلال الدولي...",
        "cxb_airport": "CXB، مطار كوكس بازار",
        "wednesday": "الأربعاء",
        "thursday": "الخميس",
        "friday": "الجمعة",
        "save_more_return": "وفر المزيد على رحلة العودة",
        "traveler": "مسافر",
        "economy": "اقتصادية",
        "room_guests": "غرفة، ضيوف",
        "adults": "بالغين",
        "bangladesh": "بنغلاديش",
        
        // Search for options
        "search_for": "البحث عن",
        "business": "أعمال",
        "couples": "أزواج",
        "families": "عائلات",
        "friends": "أصدقاء",
        "solo": "فردي",
        
        // Buttons
        "search": "بحث",
        "learn_more": "اعرف المزيد",
        "apply": "تطبيق",
        "send_message": "إرسال رسالة",
        
        // Account slider
        "how_book_flight": "كيف تحجز رحلة جوية؟",
        "how_book_hotel": "كيف تحجز فندق؟",
        "how_get_discount": "كيف تحصل على خصم؟",
        "how_create_account": "كيف تنشئ حساب؟",
        "watch": "▷ شاهد",
        
        // Hot deals
        "hot_deals": "عروض ساخنة",
        "all": "الكل",
        "others": "أخرى",
        "up_to_18_discount": "خصم يصل إلى 18%*",
        "up_to_14_discount": "خصم يصل إلى 14%*",
        "up_to_bdt_4000_cashback": "استرداد نقدي يصل إلى 4000 تاكا*",
        "discount_intl_flight": "خصم يصل إلى 18% على حجوزات الطيران الدولي",
        "on_base_fare_city_bank": "على السعر الأساسي، لبطاقات سيتي بنك أمريكان إكسبريس البلاتينية والذهبية. حتى 31 ديسمبر '25.",
        "on_intl_flight_bookings": "على حجوزات الطيران الدولي",
        "on_base_fare_ebl": "على السعر الأساسي، لجميع بطاقات إي بي إل فيزا. حتى 5 أغسطس 2025.",
        "on_bkash_payments": "على مدفوعات بيكاش",
        "up_to_bdt_4000_cashback_bkash": "استرداد نقدي يصل إلى 4000 تاكا لمدفوعات بيكاش. حتى 31 يوليو 2025.",
        
        // Services
        "our_services": "خدماتنا",
        "flight_booking": "حجز الطيران",
        "best_deals_flights": "أفضل العروض على الرحلات المحلية والدولية.",
        "hotel_reservations": "حجز الفنادق",
        "comfortable_stays": "إقامة مريحة في أفضل الفنادق حول العالم.",
        "tour_packages": "باقات السياحة",
        "customizable_tour_packages": "باقات سياحية قابلة للتخصيص لكل مسافر.",
        "visa_assistance": "مساعدة التأشيرة",
        "expert_help_visa": "مساعدة خبيرة في طلبات التأشيرة والتوثيق.",
        "hajj_umrah": "الحج والعمرة",
        "complete_hajj_umrah": "باقات الحج والعمرة الكاملة مع التوجيه الروحي.",
        "student_visa_consultancy": "استشارة تأشيرة الطالب",
        "professional_guidance_student": "توجيه مهني لطلبات تأشيرة الطالب حول العالم.",
        "work_visa_process": "عملية تأشيرة العمل",
        "comprehensive_work_visa": "خدمات شاملة لتأشيرة العمل للتوظيف الدولي.",
        
        // Destinations
        "popular_destinations": "الوجهات الشائعة",
        "paris": "باريس",
        "maldives": "جزر المالديف",
        "dubai": "دبي",
        "bangkok": "بانكوك",
        
        // Contact
        "contact_us": "اتصل بنا",
        "your_name": "اسمك",
        "your_email": "بريدك الإلكتروني",
        "your_message": "رسالتك",
        
        // Footer
        "discover": "اكتشف",
        "home": "الرئيسية",
        "terms": "الشروط",
        "talent_culture": "المواهب والثقافة",
        "about_us": "من نحن",
        "refund_policy": "سياسة الاسترداد",
        "emi_policy": "سياسة EMI",
        "privacy_policy": "سياسة الخصوصية",
        "payment_methods": "طرق الدفع",
        "need_help": "تحتاج مساعدة؟",
        "here_24_7": "نحن هنا من أجلك 24/7! تواصل معنا عبر Messenger أو اتصل في أي وقت، ليلاً أو نهاراً، للحصول على الدعم الذي تحتاجه.",
        "experience_center": "مركز الخبرة",
        "experience_center_address": "شيلتيك أيان، منزل 58، طريق 6 و 11، بلوك C، الطابق 2، بناني، دكا",
        "contact": "اتصل بنا",
        "copyright": "حقوق النشر زاهد إنترناشونال المحدودة."
    }
};

// Current language
let currentLanguage = 'english';

// Bangladesh Districts and Locations Database
const bangladeshLocations = {
    districts: [
        // Dhaka Division
        { name: "Dhaka", code: "DAC", type: "district", division: "Dhaka", airport: "Hazrat Shahjalal International Airport" },
        { name: "Gazipur", code: "GZP", type: "district", division: "Dhaka" },
        { name: "Narayanganj", code: "NRY", type: "district", division: "Dhaka" },
        { name: "Tangail", code: "TGL", type: "district", division: "Dhaka" },
        { name: "Narsingdi", code: "NSD", type: "district", division: "Dhaka" },
        { name: "Kishoreganj", code: "KSG", type: "district", division: "Dhaka" },
        { name: "Manikganj", code: "MKG", type: "district", division: "Dhaka" },
        { name: "Munshiganj", code: "MSG", type: "district", division: "Dhaka" },
        { name: "Rajbari", code: "RJB", type: "district", division: "Dhaka" },
        { name: "Madaripur", code: "MDP", type: "district", division: "Dhaka" },
        { name: "Gopalganj", code: "GPG", type: "district", division: "Dhaka" },
        { name: "Faridpur", code: "FRD", type: "district", division: "Dhaka" },
        { name: "Shariatpur", code: "SHP", type: "district", division: "Dhaka" },

        // Chittagong Division
        { name: "Chittagong", code: "CGP", type: "district", division: "Chittagong", airport: "Shah Amanat International Airport" },
        { name: "Cox's Bazar", code: "CXB", type: "district", division: "Chittagong", airport: "Cox's Bazar Airport" },
        { name: "Comilla", code: "CLA", type: "district", division: "Chittagong" },
        { name: "Chandpur", code: "CDP", type: "district", division: "Chittagong" },
        { name: "Lakshmipur", code: "LKP", type: "district", division: "Chittagong" },
        { name: "Noakhali", code: "NKL", type: "district", division: "Chittagong" },
        { name: "Feni", code: "FNI", type: "district", division: "Chittagong" },
        { name: "Brahmanbaria", code: "BRB", type: "district", division: "Chittagong" },
        { name: "Rangamati", code: "RGM", type: "district", division: "Chittagong" },
        { name: "Khagrachari", code: "KGC", type: "district", division: "Chittagong" },
        { name: "Bandarban", code: "BDB", type: "district", division: "Chittagong" },

        // Rajshahi Division
        { name: "Rajshahi", code: "RJH", type: "district", division: "Rajshahi" },
        { name: "Natore", code: "NTR", type: "district", division: "Rajshahi" },
        { name: "Naogaon", code: "NGO", type: "district", division: "Rajshahi" },
        { name: "Chapainawabganj", code: "CNB", type: "district", division: "Rajshahi" },
        { name: "Pabna", code: "PBN", type: "district", division: "Rajshahi" },
        { name: "Sirajganj", code: "SRJ", type: "district", division: "Rajshahi" },
        { name: "Bogura", code: "BGR", type: "district", division: "Rajshahi" },
        { name: "Joypurhat", code: "JPH", type: "district", division: "Rajshahi" },

        // Khulna Division
        { name: "Khulna", code: "KLN", type: "district", division: "Khulna" },
        { name: "Bagerhat", code: "BGH", type: "district", division: "Khulna" },
        { name: "Satkhira", code: "SKR", type: "district", division: "Khulna" },
        { name: "Jessore", code: "JSR", type: "district", division: "Khulna" },
        { name: "Magura", code: "MGR", type: "district", division: "Khulna" },
        { name: "Jhenaidah", code: "JND", type: "district", division: "Khulna" },
        { name: "Kushtia", code: "KST", type: "district", division: "Khulna" },
        { name: "Chuadanga", code: "CDG", type: "district", division: "Khulna" },
        { name: "Meherpur", code: "MHP", type: "district", division: "Khulna" },
        { name: "Narail", code: "NRL", type: "district", division: "Khulna" },

        // Barisal Division
        { name: "Barisal", code: "BRS", type: "district", division: "Barisal" },
        { name: "Bhola", code: "BHL", type: "district", division: "Barisal" },
        { name: "Pirojpur", code: "PRP", type: "district", division: "Barisal" },
        { name: "Patuakhali", code: "PTK", type: "district", division: "Barisal" },
        { name: "Barguna", code: "BRG", type: "district", division: "Barisal" },
        { name: "Jhalokati", code: "JLT", type: "district", division: "Barisal" },

        // Sylhet Division
        { name: "Sylhet", code: "ZYL", type: "district", division: "Sylhet", airport: "Osmani International Airport" },
        { name: "Moulvibazar", code: "MLB", type: "district", division: "Sylhet" },
        { name: "Habiganj", code: "HBJ", type: "district", division: "Sylhet" },
        { name: "Sunamganj", code: "SNG", type: "district", division: "Sylhet" },

        // Rangpur Division
        { name: "Rangpur", code: "RGP", type: "district", division: "Rangpur" },
        { name: "Dinajpur", code: "DJP", type: "district", division: "Rangpur" },
        { name: "Kurigram", code: "KRM", type: "district", division: "Rangpur" },
        { name: "Gaibandha", code: "GBD", type: "district", division: "Rangpur" },
        { name: "Nilphamari", code: "NLP", type: "district", division: "Rangpur" },
        { name: "Panchagarh", code: "PCG", type: "district", division: "Rangpur" },
        { name: "Thakurgaon", code: "TKG", type: "district", division: "Rangpur" },
        { name: "Lalmonirhat", code: "LMH", type: "district", division: "Rangpur" },

        // Mymensingh Division
        { name: "Mymensingh", code: "MYS", type: "district", division: "Mymensingh" },
        { name: "Jamalpur", code: "JMP", type: "district", division: "Mymensingh" },
        { name: "Sherpur", code: "SHP", type: "district", division: "Mymensingh" },
        { name: "Netrokona", code: "NTK", type: "district", division: "Mymensingh" }
    ],

    majorCities: [
        { name: "Dhaka City", code: "DAC", type: "city", division: "Dhaka" },
        { name: "Chittagong City", code: "CGP", type: "city", division: "Chittagong" },
        { name: "Sylhet City", code: "ZYL", type: "city", division: "Sylhet" },
        { name: "Rajshahi City", code: "RJH", type: "city", division: "Rajshahi" },
        { name: "Khulna City", code: "KLN", type: "city", division: "Khulna" },
        { name: "Barisal City", code: "BRS", type: "city", division: "Barisal" },
        { name: "Rangpur City", code: "RGP", type: "city", division: "Rangpur" },
        { name: "Mymensingh City", code: "MYS", type: "city", division: "Mymensingh" }
    ],

    popularDestinations: [
        { name: "Cox's Bazar Beach", code: "CXB", type: "destination", division: "Chittagong" },
        { name: "Sundarbans", code: "SND", type: "destination", division: "Khulna" },
        { name: "Srimangal Tea Gardens", code: "SRM", type: "destination", division: "Sylhet" },
        { name: "Bandarban Hill Tracts", code: "BDB", type: "destination", division: "Chittagong" },
        { name: "Rangamati Lake", code: "RGM", type: "destination", division: "Chittagong" },
        { name: "Saint Martin's Island", code: "SMI", type: "destination", division: "Chittagong" },
        { name: "Kuakata Beach", code: "KKA", type: "destination", division: "Barisal" },
        { name: "Paharpur Buddhist Vihara", code: "PBV", type: "destination", division: "Rajshahi" }
    ],

    internationalLocations: [
        { name: "Boston", code: "BOS", type: "city", division: "United States", airport: "Logan International Airport" },
        { name: "London", code: "LHR", type: "city", division: "United Kingdom", airport: "London Heathrow Airport" },
        { name: "Dubai", code: "DXB", type: "city", division: "United Arab Emirates", airport: "Dubai International Airport" },
        { name: "New York", code: "JFK", type: "city", division: "United States", airport: "John F. Kennedy International Airport" },
        { name: "Paris", code: "CDG", type: "city", division: "France", airport: "Charles de Gaulle Airport" },
        { name: "Tokyo", code: "NRT", type: "city", division: "Japan", airport: "Narita International Airport" },
        { name: "Singapore", code: "SIN", type: "city", division: "Singapore", airport: "Changi Airport" },
        { name: "Bangkok", code: "BKK", type: "city", division: "Thailand", airport: "Suvarnabhumi Airport" },
        { name: "Kuala Lumpur", code: "KUL", type: "city", division: "Malaysia", airport: "Kuala Lumpur International Airport" },
        { name: "Hong Kong", code: "HKG", type: "city", division: "Hong Kong", airport: "Hong Kong International Airport" }
    ]
};

// Function to search locations
function searchLocations(query) {
    const allLocations = [
        ...bangladeshLocations.districts,
        ...bangladeshLocations.majorCities,
        ...bangladeshLocations.popularDestinations,
        ...bangladeshLocations.internationalLocations
    ];
    
    return allLocations.filter(location => 
        location.name.toLowerCase().includes(query.toLowerCase()) ||
        location.code.toLowerCase().includes(query.toLowerCase()) ||
        location.division.toLowerCase().includes(query.toLowerCase()) ||
        (location.airport && location.airport.toLowerCase().includes(query.toLowerCase()))
    );
}

// Function to get location details
function getLocationDetails(locationName) {
    const allLocations = [
        ...bangladeshLocations.districts,
        ...bangladeshLocations.majorCities,
        ...bangladeshLocations.popularDestinations,
        ...bangladeshLocations.internationalLocations
    ];
    
    return allLocations.find(location => 
        location.name.toLowerCase() === locationName.toLowerCase()
    );
}

// Bengali translations for locations
const locationTranslations = {
    english: {
        "search_location": "Search location...",
        "no_locations_found": "No locations found",
        "district": "district",
        "city": "city",
        "destination": "destination"
    },
    bengali: {
        "search_location": "অবস্থান অনুসন্ধান করুন...",
        "no_locations_found": "কোন অবস্থান পাওয়া যায়নি",
        "district": "জেলা",
        "city": "শহর",
        "destination": "গন্তব্য"
    },
    arabic: {
        "search_location": "البحث عن موقع...",
        "no_locations_found": "لم يتم العثور على مواقع",
        "district": "منطقة",
        "city": "مدينة",
        "destination": "وجهة"
    }
};

// Function to translate location types
function translateLocationType(type) {
    return locationTranslations[currentLanguage]?.[type] || type;
}

// Function to translate text
function translateText(element, key) {
    if (translations[currentLanguage] && translations[currentLanguage][key]) {
        element.textContent = translations[currentLanguage][key];
    }
}

// Function to translate the entire website
function translateWebsite(language) {
    currentLanguage = language;
    
    // Header translations
    const contactBtnEl = document.querySelector('.contact-btn');
    if (contactBtnEl) translateText(contactBtnEl, 'contact');
    const b2bBtnEl = document.querySelector('.b2b-btn');
    if (b2bBtnEl) translateText(b2bBtnEl, 'b2b_agent_login');
    const signRegisterBtnEl = document.querySelector('.sign-register-btn');
    if (signRegisterBtnEl) translateText(signRegisterBtnEl, 'sign_in_register');
    
    // Booking tabs
    const tabLabels = document.querySelectorAll('.tab-label');
    tabLabels.forEach((label, index) => {
        const keys = ['flight', 'hotel', 'tour', 'visa'];
        if (keys[index]) {
            translateText(label, keys[index]);
        }
    });
    
    // Trip type labels
    const tripLabels = document.querySelectorAll('.trip-type span');
    tripLabels.forEach((label, index) => {
        const keys = ['one_way', 'round_way', 'multi_city'];
        if (keys[index]) {
            translateText(label, keys[index]);
        }
    });
    
    // Form labels
    const formLabels = document.querySelectorAll('.form-group label');
    formLabels.forEach(label => {
        const text = label.textContent.trim();
        if (text === 'FROM') translateText(label, 'from');
        else if (text === 'TO') translateText(label, 'to');
        else if (text === 'JOURNEY DATE') translateText(label, 'journey_date');
        else if (text === 'RETURN DATE') translateText(label, 'return_date');
        else if (text === 'TRAVELER, CLASS') translateText(label, 'traveler_class');
        else if (text === 'CITY/HOTEL/RESORT/AREA') translateText(label, 'city_hotel_resort_area');
        else if (text === 'CHECK IN') translateText(label, 'check_in');
        else if (text === 'CHECK OUT') translateText(label, 'check_out');
        else if (text === 'ROOMS & GUESTS') translateText(label, 'rooms_guests');
    });
    
    // Form values
    const mainValues = document.querySelectorAll('.main-value');
    mainValues.forEach(value => {
        const text = value.textContent.trim();
        if (text === 'Dhaka') translateText(value, 'dhaka');
        else if (text === "Cox's Bazar") translateText(value, 'coxs_bazar');
        else if (text === '1 Traveler') translateText(value, 'traveler');
        else if (text === '1 Room, 2 Guests') translateText(value, 'room_guests');
        else if (text === 'Cox\'s Bazar') translateText(value, 'coxs_bazar');
    });
    
    // Form descriptions
    const formDescs = document.querySelectorAll('.form-desc');
    formDescs.forEach(desc => {
        const text = desc.textContent.trim();
        if (text === 'DAC, Hazrat Shahjalal International Ai...') translateText(desc, 'dac_airport');
        else if (text === 'CXB, Cox\'s Bazar Airport') translateText(desc, 'cxb_airport');
        else if (text === 'Economy') translateText(desc, 'economy');
        else if (text === '2 Adults') translateText(desc, 'adults');
        else if (text === 'Bangladesh') translateText(desc, 'bangladesh');
        else if (text === 'Wednesday') translateText(desc, 'wednesday');
        else if (text === 'Thursday') translateText(desc, 'thursday');
        else if (text === 'Friday') translateText(desc, 'friday');
    });
    
    // Search for section
    const searchForLabel = document.querySelector('.search-for-label');
    if (searchForLabel) translateText(searchForLabel, 'search_for');
    
    const optionLabels = document.querySelectorAll('.option-label');
    optionLabels.forEach((label, index) => {
        const keys = ['business', 'couples', 'families', 'friends', 'solo'];
        if (keys[index]) {
            translateText(label, keys[index]);
        }
    });
    
    // Buttons
    const searchBtns = document.querySelectorAll('.search-btn');
    searchBtns.forEach(btn => translateText(btn, 'search'));
    
    const learnMoreBtns = document.querySelectorAll('.learn-more-btn span');
    learnMoreBtns.forEach(btn => {
        if (btn.textContent === 'Learn More') translateText(btn, 'learn_more');
    });
    
    // Account slider
    const cardTitles = document.querySelectorAll('.card h2');
    cardTitles.forEach((title, index) => {
        const keys = ['how_book_flight', 'how_book_hotel', 'how_get_discount', 'how_create_account'];
        if (keys[index]) {
            translateText(title, keys[index]);
        }
    });
    
    const watchBtns = document.querySelectorAll('.card .btn');
    watchBtns.forEach(btn => translateText(btn, 'watch'));
    
    // Hot deals
    const hotDealsTitle = document.querySelector('.hot-deals-title');
    if (hotDealsTitle) translateText(hotDealsTitle, 'hot_deals');
    
    const dealTabs = document.querySelectorAll('.deal-tab');
    dealTabs.forEach((tab, index) => {
        const keys = ['all', 'flight', 'hotel', 'tour', 'others'];
        if (keys[index]) {
            translateText(tab, keys[index]);
        }
    });
    
    // Deal banners and content
    const dealBanners = document.querySelectorAll('.deal-banner');
    dealBanners.forEach((banner, index) => {
        const keys = ['up_to_18_discount', 'up_to_14_discount', 'up_to_bdt_4000_cashback'];
        if (keys[index]) {
            translateText(banner, keys[index]);
        }
    });
    
    const dealTitles = document.querySelectorAll('.deal-title');
    dealTitles.forEach((title, index) => {
        const keys = ['discount_intl_flight', 'on_intl_flight_bookings', 'on_bkash_payments'];
        if (keys[index]) {
            translateText(title, keys[index]);
        }
    });
    
    const dealDescriptions = document.querySelectorAll('.deal-description');
    dealDescriptions.forEach((desc, index) => {
        const keys = ['on_base_fare_city_bank', 'on_base_fare_ebl', 'up_to_bdt_4000_cashback_bkash'];
        if (keys[index]) {
            translateText(desc, keys[index]);
        }
    });
    
    // Services section
    const servicesTitle = document.querySelector('#services h2');
    if (servicesTitle) translateText(servicesTitle, 'our_services');
    
    const serviceItems = document.querySelectorAll('.service-item h3');
    const serviceKeys = ['flight_booking', 'hotel_reservations', 'tour_packages', 'visa_assistance', 'hajj_umrah', 'student_visa_consultancy', 'work_visa_process'];
    serviceItems.forEach((item, index) => {
        if (serviceKeys[index]) {
            translateText(item, serviceKeys[index]);
        }
    });
    
    const serviceDescriptions = document.querySelectorAll('.service-item p');
    const descKeys = ['best_deals_flights', 'comfortable_stays', 'customizable_tour_packages', 'expert_help_visa', 'complete_hajj_umrah', 'professional_guidance_student', 'comprehensive_work_visa'];
    serviceDescriptions.forEach((desc, index) => {
        if (descKeys[index]) {
            translateText(desc, descKeys[index]);
        }
    });
    
    // Destinations
    const destinationsTitle = document.querySelector('#destinations h2');
    if (destinationsTitle) translateText(destinationsTitle, 'popular_destinations');
    
    const destinationNames = document.querySelectorAll('.destination-item h3');
    const destKeys = ['paris', 'maldives', 'dubai', 'bangkok'];
    destinationNames.forEach((name, index) => {
        if (destKeys[index]) {
            translateText(name, destKeys[index]);
        }
    });
    
    // Contact section
    const contactTitle = document.querySelector('#contact h2');
    if (contactTitle) translateText(contactTitle, 'contact_us');
    
    const contactInputs = document.querySelectorAll('#contactForm input, #contactForm textarea');
    const inputKeys = ['your_name', 'your_email', 'your_message'];
    contactInputs.forEach((input, index) => {
        if (inputKeys[index]) {
            input.placeholder = translations[currentLanguage][inputKeys[index]];
        }
    });
    
    const sendMessageBtn = document.querySelector('#contactForm .btn');
    if (sendMessageBtn) translateText(sendMessageBtn, 'send_message');
    
    // Footer
    const footerHeadings = document.querySelectorAll('.footer-heading');
    const headingKeys = ['discover', 'payment_methods', 'need_help', 'contact'];
    footerHeadings.forEach((heading, index) => {
        if (headingKeys[index]) {
            translateText(heading, headingKeys[index]);
        }
    });
    
    const footerLinks = document.querySelectorAll('.footer-link');
    const linkKeys = ['home', 'terms', 'talent_culture', 'about_us', 'refund_policy', 'emi_policy', 'privacy_policy'];
    footerLinks.forEach((link, index) => {
        if (linkKeys[index]) {
            translateText(link, linkKeys[index]);
        }
    });
    
    const footerTexts = document.querySelectorAll('.footer-text');
    footerTexts.forEach((text, index) => {
        if (index === 0) translateText(text, 'here_24_7');
        else if (index === 1) translateText(text, 'experience_center_address');
    });
    
    const footerSubheading = document.querySelector('.footer-subheading');
    if (footerSubheading) translateText(footerSubheading, 'experience_center');
    
    const copyright = document.querySelector('.footer-copyright p');
    if (copyright) translateText(copyright, 'copyright');
    
    // Update location search placeholders
    const fromInput = document.getElementById('fromLocation');
    const toInput = document.getElementById('toLocation');
    if (fromInput && toInput) {
        const placeholder = locationTranslations[currentLanguage]?.search_location || "Search location...";
        fromInput.placeholder = placeholder;
        toInput.placeholder = placeholder;
    }
}

// Language Modal functionality
function setupLanguageModal() {
    const languageSelector = document.getElementById('languageSelector');
    const languageModal = document.getElementById('languageModal');
    const languageOptions = document.querySelectorAll('.language-option');

    if (!languageSelector || !languageModal) {
        console.error('Language modal elements not found');
        return;
    }

    // Open language modal when language selector is clicked
    languageSelector.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        languageModal.classList.add('show');
        console.log('Language modal opened');
    });

    // Close modal when clicking outside
    document.addEventListener('click', function(e) {
        if (!languageModal.contains(e.target) && !languageSelector.contains(e.target)) {
            languageModal.classList.remove('show');
            console.log('Language modal closed');
        }
    });

    // Language selection
    languageOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            // Remove selected class from all options
            languageOptions.forEach(opt => opt.classList.remove('selected'));
            // Add selected class to clicked option
            this.classList.add('selected');
            
            const language = this.dataset.language;
            const languageName = this.querySelector('.language-name').textContent;
            const languageNative = this.querySelector('.language-native').textContent;
            
            // Update the language selector text
            if (language === 'english') {
                languageSelector.textContent = 'En';
            } else if (language === 'arabic') {
                languageSelector.textContent = 'عربي';
            } else if (language === 'bengali') {
                languageSelector.textContent = 'বাং';
            }
            
            console.log('Language selected:', language, languageName, languageNative);
            
            // Translate the website
            translateWebsite(language);
            
            // Close the modal
            languageModal.classList.remove('show');
        });
    });
}

// Tab switching for booking card
function setupBookingTabs() {
    const tabs = document.querySelectorAll('.booking-tabs .tab');
    const flightForm = document.getElementById('flightForm');
    const hotelForm = document.getElementById('hotelForm');
    
    if (!tabs || tabs.length === 0) return;

    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            const tabType = this.dataset.tab;
            console.log('Tab switched to:', tabType);
            
            // Show/hide appropriate form
            if (flightForm && hotelForm) {
                if (tabType === 'flight') {
                    flightForm.style.display = 'block';
                    hotelForm.style.display = 'none';
                    flightForm.classList.add('active');
                    hotelForm.classList.remove('active');
                    console.log('Flight form shown, hotel form hidden');
                } else if (tabType === 'hotel') {
                    hotelForm.style.display = 'block';
                    flightForm.style.display = 'none';
                    hotelForm.classList.add('active');
                    flightForm.classList.remove('active');
                    console.log('Hotel form shown, flight form hidden');
                } else {
                    // For tour and visa tabs, show hotel form as default
                    hotelForm.style.display = 'block';
                    flightForm.style.display = 'none';
                    hotelForm.classList.add('active');
                    flightForm.classList.remove('active');
                    console.log('Hotel form shown (default for tour/visa)');
                }
            }
        });
    });
}

// Region and Currency Popup functionality
function setupRegionCurrencyPopup() {
    const currencySelect = document.getElementById('currencySelect');
    const popup = document.getElementById('regionCurrencyPopup');
    const applyBtn = document.getElementById('applyBtn');
    const regionOptions = document.querySelectorAll('.region-option');
    const currencyOptions = document.querySelectorAll('.currency-option');

    if (!currencySelect || !popup || !applyBtn) {
        console.error('Required elements not found for popup functionality');
        return;
    }

    // Open popup when currency selector is clicked
    currencySelect.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        popup.classList.add('show');
        currencySelect.classList.add('active');
        console.log('Popup opened');
    });

    // Close popup when clicking outside
    document.addEventListener('click', function(e) {
        if (!popup.contains(e.target) && !currencySelect.contains(e.target)) {
            popup.classList.remove('show');
            currencySelect.classList.remove('active');
            console.log('Popup closed');
        }
    });

    // Region selection
    regionOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            regionOptions.forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
            
            // Update currency based on region
            const region = this.dataset.region;
            console.log('Region selected:', region);
            
            const codeDisplay = document.querySelector('#currencySelect .currency-code-display');
            if (codeDisplay) {
                codeDisplay.textContent = region === 'pakistan' ? 'PKR' : 'BDT';
            }
        });
    });

    // Currency selection
    currencyOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            currencyOptions.forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
            console.log('Currency selected:', this.dataset.currency);
        });
    });

    // Apply button functionality
    applyBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        console.log('Apply button clicked');
        
        const selectedRegion = document.querySelector('.region-option.selected');
        const selectedCurrency = document.querySelector('.currency-option.selected');
        
        if (!selectedRegion || !selectedCurrency) {
            console.error('No region or currency selected');
            return;
        }
        
        // Update the currency selector display
        const codeDisplay = document.querySelector('#currencySelect .currency-code-display');
        if (codeDisplay) {
            codeDisplay.textContent = selectedRegion.dataset.region === 'pakistan' ? 'PKR' : 'BDT';
        }
        
        // Close popup
        popup.classList.remove('show');
        currencySelect.classList.remove('active');
        
        // Show success message
        console.log('Region and currency updated successfully!');
        
        // Optional: Show a brief success message to user
        showSuccessMessage('Settings updated successfully!');
    });
}

// Success message function
function showSuccessMessage(message) {
    // Create a temporary success message
    const successMsg = document.createElement('div');
    successMsg.textContent = message;
    successMsg.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #4caf50;
        color: white;
        padding: 12px 20px;
        border-radius: 5px;
        z-index: 10000;
        font-weight: bold;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        animation: slideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(successMsg);
    
    // Remove after 3 seconds
    setTimeout(() => {
        successMsg.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => {
            if (successMsg.parentNode) {
                successMsg.parentNode.removeChild(successMsg);
            }
        }, 300);
    }, 3000);
}

// Setup booking form functionality
function setupBookingForm() {
    const flightForm = document.getElementById('flightForm');
    const hotelForm = document.getElementById('hotelForm');
    
    console.log('Setting up booking forms...');
    console.log('Flight form found:', !!flightForm);
    console.log('Hotel form found:', !!hotelForm);
    
    if (flightForm) {
        flightForm.addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Flight booking form submitted');
            
            // Get form data
            const tripType = document.getElementById('tripType');
            const passengerCount = document.getElementById('passengerCount');
            const classType = document.getElementById('classType');
            const airlineType = document.getElementById('airlineType');
            const departureDate = document.getElementById('departureDate');
            const returnDate = document.getElementById('returnDate');
            
            console.log('Trip type:', tripType ? tripType.value : 'N/A');
            console.log('Passenger count:', passengerCount ? passengerCount.value : 'N/A');
            console.log('Class type:', classType ? classType.value : 'N/A');
            console.log('Airline type:', airlineType ? airlineType.value : 'N/A');
            console.log('Departure date:', departureDate ? departureDate.value : 'N/A');
            console.log('Return date:', returnDate ? returnDate.value : 'N/A');
            
            // Get location data
            const fromLocation = document.getElementById('fromLocation').value;
            const toLocation = document.getElementById('toLocation').value;
            console.log('From:', fromLocation, 'To:', toLocation);
            
            // Show success message
            showSuccessMessage('Searching for flights...');
            
            // Add visual feedback to the button
            const searchBtn = this.querySelector('.search-btn');
            if (searchBtn) {
                searchBtn.textContent = 'Searching...';
                searchBtn.style.background = '#4caf50';
                searchBtn.style.color = 'white';
                
                setTimeout(() => {
                    searchBtn.textContent = 'Search';
                    searchBtn.style.background = '#ffd700';
                    searchBtn.style.color = '#000';
                    // Show search results after button animation
                    showSearchResults('flights');
                }, 2000);
            }
        });
        
        // Also add click event to search button for debugging
        const flightSearchBtn = flightForm.querySelector('.search-btn');
        if (flightSearchBtn) {
            console.log('Flight search button found and event listener added');
            flightSearchBtn.addEventListener('click', function(e) {
                console.log('Flight search button clicked');
                // Add visual feedback
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);
            });
        } else {
            console.error('Flight search button not found!');
        }
    }
    
    if (hotelForm) {
        hotelForm.addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Hotel booking form submitted');
            
            // Get selected search for options
            const selectedOptions = document.querySelectorAll('input[name="searchFor"]:checked');
            const selectedValues = Array.from(selectedOptions).map(option => option.value);
            console.log('Search for options selected:', selectedValues);
            
            // Show success message
            showSuccessMessage('Searching for hotels...');
            
            // Add visual feedback to the button
            const searchBtn = this.querySelector('.search-btn');
            if (searchBtn) {
                searchBtn.textContent = 'Searching...';
                searchBtn.style.background = '#4caf50';
                searchBtn.style.color = 'white';
                
                setTimeout(() => {
                    searchBtn.textContent = 'Search';
                    searchBtn.style.background = '#ffd700';
                    searchBtn.style.color = '#000';
                    // Show search results after button animation
                    showSearchResults('hotels');
                }, 2000);
            }
        });
        
        // Also add click event to search button for debugging
        const hotelSearchBtn = hotelForm.querySelector('.search-btn');
        if (hotelSearchBtn) {
            console.log('Hotel search button found and event listener added');
            hotelSearchBtn.addEventListener('click', function(e) {
                console.log('Hotel search button clicked');
                // Add visual feedback
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);
            });
        } else {
            console.error('Hotel search button not found!');
        }
    }
}

// Setup location search functionality
function setupLocationSearch() {
    const fromInput = document.getElementById('fromLocation');
    const toInput = document.getElementById('toLocation');
    const fromDropdown = document.getElementById('fromDropdown');
    const toDropdown = document.getElementById('toDropdown');
    
    if (!fromInput || !toInput || !fromDropdown || !toDropdown) {
        console.error('Location search elements not found');
        return;
    }
    
    // Set default values
    fromInput.value = 'Dhaka';
    toInput.value = "Cox's Bazar";
    
    // Update placeholders based on current language
    function updatePlaceholders() {
        const placeholder = locationTranslations[currentLanguage]?.search_location || "Search location...";
        fromInput.placeholder = placeholder;
        toInput.placeholder = placeholder;
    }
    
    updatePlaceholders();
    
    // Function to create dropdown options
    function createDropdownOptions(locations, dropdown) {
        dropdown.innerHTML = '';
        
        if (locations.length === 0) {
            const noResultsText = locationTranslations[currentLanguage]?.no_locations_found || "No locations found";
            dropdown.innerHTML = `<div class="location-option">${noResultsText}</div>`;
            return;
        }
        
        locations.forEach(location => {
            const option = document.createElement('div');
            option.className = 'location-option';
            
            // Format location name as "City - Country" like in the image
            const locationDisplay = location.name.includes('City') ? 
                location.name.replace(' City', '') : location.name;
            
            // For international locations, use the division as country name
            const countryName = location.division === 'Dhaka' ? 'Bangladesh' : 
                               location.division === 'Chittagong' ? 'Bangladesh' :
                               location.division === 'Sylhet' ? 'Bangladesh' :
                               location.division === 'Rajshahi' ? 'Bangladesh' :
                               location.division === 'Khulna' ? 'Bangladesh' :
                               location.division === 'Barisal' ? 'Bangladesh' :
                               location.division === 'Rangpur' ? 'Bangladesh' :
                               location.division === 'Mymensingh' ? 'Bangladesh' : location.division;
            
            option.innerHTML = `
                <div class="location-name">
                    <div class="location-main-text">
                        ${locationDisplay} - ${countryName}
                    </div>
                    <span class="location-code">${location.code}</span>
                </div>
                <div class="location-details">
                    ${location.airport || location.division}
                </div>
            `;
            
            option.addEventListener('click', function() {
                const input = dropdown === fromDropdown ? fromInput : toInput;
                const desc = dropdown === fromDropdown ? document.getElementById('fromDesc') : document.getElementById('toDesc');
                
                input.value = location.name;
                desc.textContent = `${location.code}${location.airport ? `, ${location.airport}` : `, ${location.division}`}`;
                dropdown.classList.remove('show');
            });
            
            dropdown.appendChild(option);
        });
    }
    
    // Function to handle input changes
    function handleInputChange(input, dropdown) {
        const query = input.value.trim();
        
        if (query.length < 2) {
            dropdown.classList.remove('show');
            return;
        }
        
        const results = searchLocations(query);
        createDropdownOptions(results, dropdown);
        dropdown.classList.add('show');
    }
    
    // Add event listeners
    fromInput.addEventListener('input', () => handleInputChange(fromInput, fromDropdown));
    toInput.addEventListener('input', () => handleInputChange(toInput, toDropdown));
    
    // Handle focus events
    fromInput.addEventListener('focus', () => {
        if (fromInput.value.trim().length >= 2) {
            handleInputChange(fromInput, fromDropdown);
        }
    });
    
    toInput.addEventListener('focus', () => {
        if (toInput.value.trim().length >= 2) {
            handleInputChange(toInput, toDropdown);
        }
    });
    
    // Close dropdowns when clicking outside
    document.addEventListener('click', function(e) {
        if (!fromInput.contains(e.target) && !fromDropdown.contains(e.target)) {
            fromDropdown.classList.remove('show');
        }
        if (!toInput.contains(e.target) && !toDropdown.contains(e.target)) {
            toDropdown.classList.remove('show');
        }
    });
    
    // Handle keyboard navigation
    fromInput.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
            e.preventDefault();
            const options = fromDropdown.querySelectorAll('.location-option');
            const currentIndex = Array.from(options).findIndex(option => option.classList.contains('selected'));
            
            if (e.key === 'ArrowDown') {
                const nextIndex = currentIndex < options.length - 1 ? currentIndex + 1 : 0;
                options.forEach(option => option.classList.remove('selected'));
                options[nextIndex]?.classList.add('selected');
            } else if (e.key === 'ArrowUp') {
                const prevIndex = currentIndex > 0 ? currentIndex - 1 : options.length - 1;
                options.forEach(option => option.classList.remove('selected'));
                options[prevIndex]?.classList.add('selected');
            }
        } else if (e.key === 'Enter') {
            e.preventDefault();
            const selectedOption = fromDropdown.querySelector('.location-option.selected');
            if (selectedOption) {
                selectedOption.click();
            }
        } else if (e.key === 'Escape') {
            fromDropdown.classList.remove('show');
        }
    });
    
    toInput.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
            e.preventDefault();
            const options = toDropdown.querySelectorAll('.location-option');
            const currentIndex = Array.from(options).findIndex(option => option.classList.contains('selected'));
            
            if (e.key === 'ArrowDown') {
                const nextIndex = currentIndex < options.length - 1 ? currentIndex + 1 : 0;
                options.forEach(option => option.classList.remove('selected'));
                options[nextIndex]?.classList.add('selected');
            } else if (e.key === 'ArrowUp') {
                const prevIndex = currentIndex > 0 ? currentIndex - 1 : options.length - 1;
                options.forEach(option => option.classList.remove('selected'));
                options[prevIndex]?.classList.add('selected');
            }
        } else if (e.key === 'Enter') {
            e.preventDefault();
            const selectedOption = toDropdown.querySelector('.location-option.selected');
            if (selectedOption) {
                selectedOption.click();
            }
        } else if (e.key === 'Escape') {
            toDropdown.classList.remove('show');
        }
    });
    
    console.log('Location search functionality initialized');
    
    // Setup swap functionality
    const swapArrow = document.querySelector('.swap-arrow span');
    if (swapArrow) {
        swapArrow.addEventListener('click', function() {
            const fromValue = fromInput.value;
            const toValue = toInput.value;
            const fromDesc = document.getElementById('fromDesc').textContent;
            const toDesc = document.getElementById('toDesc').textContent;
            
            // Swap values
            fromInput.value = toValue;
            toInput.value = fromValue;
            document.getElementById('fromDesc').textContent = toDesc;
            document.getElementById('toDesc').textContent = fromDesc;
            
            console.log('Locations swapped');
        });
    }
}

// Setup flight options dropdowns
function setupFlightOptions() {
    const tripTypeSelect = document.getElementById('tripType');
    const passengerCountSelect = document.getElementById('passengerCount');
    const classTypeSelect = document.getElementById('classType');
    const airlineTypeSelect = document.getElementById('airlineType');
    const departureDateInput = document.getElementById('departureDate');
    const returnDateInput = document.getElementById('returnDate');
    
    // Trip type change handler
    if (tripTypeSelect) {
        tripTypeSelect.addEventListener('change', function() {
            console.log('Trip type changed to:', this.value);
            
            // Show/hide return date based on trip type
            const returnDateGroup = returnDateInput.closest('.form-group');
            if (this.value === 'one') {
                returnDateGroup.style.display = 'none';
            } else {
                returnDateGroup.style.display = 'flex';
            }
        });
    }
    
    // Passenger count change handler
    if (passengerCountSelect) {
        passengerCountSelect.addEventListener('change', function() {
            console.log('Passenger count changed to:', this.value);
        });
    }
    
    // Class type change handler
    if (classTypeSelect) {
        classTypeSelect.addEventListener('change', function() {
            console.log('Class type changed to:', this.value);
        });
    }
    
    // Airline type change handler
    if (airlineTypeSelect) {
        airlineTypeSelect.addEventListener('change', function() {
            console.log('Airline type changed to:', this.value);
        });
    }
    
    // Date input handlers
    if (departureDateInput) {
        departureDateInput.addEventListener('change', function() {
            console.log('Departure date changed to:', this.value);
            updateDateDescription(this, 'departure');
        });
    }
    
    if (returnDateInput) {
        returnDateInput.addEventListener('change', function() {
            console.log('Return date changed to:', this.value);
            updateDateDescription(this, 'return');
        });
    }
    
    // Set minimum dates
    const today = new Date().toISOString().split('T')[0];
    if (departureDateInput) {
        departureDateInput.min = today;
    }
    if (returnDateInput) {
        returnDateInput.min = today;
    }
    
    // Initialize date descriptions
    if (departureDateInput) {
        updateDateDescription(departureDateInput, 'departure');
    }
    if (returnDateInput) {
        updateDateDescription(returnDateInput, 'return');
    }
}

// Function to update date description
function updateDateDescription(dateInput, type) {
    const date = new Date(dateInput.value);
    const options = { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    };
    const formattedDate = date.toLocaleDateString('en-US', options);
    
    const descElement = dateInput.parentElement.querySelector('.form-desc');
    if (descElement) {
        descElement.textContent = formattedDate;
    }
}

// Setup search for checkboxes
function setupSearchForCheckboxes() {
    const searchForCheckboxes = document.querySelectorAll('input[name="searchFor"]');
    searchForCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            console.log('Search for option changed:', this.value, this.checked);
        });
    });
}

// Setup info card buttons
function setupInfoCardButtons() {
    const infoCardBtns = document.querySelectorAll('.info-card-btn');
    infoCardBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const cardTitle = this.closest('.info-card').querySelector('.info-card-title').textContent;
            console.log('Info card button clicked:', cardTitle);
            showSuccessMessage('Video tutorial will open soon!');
        });
    });
    
    const infoCardArrows = document.querySelectorAll('.info-card-arrow');
    infoCardArrows.forEach(arrow => {
        arrow.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Info card arrow clicked');
            showSuccessMessage('More information coming soon!');
        });
    });
}

// Setup sign in button
function setupSignInButton() {
    const signInBtn = document.querySelector('.sign-in-btn');
    if (signInBtn) {
        signInBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Sign in button clicked');
            showSuccessMessage('Sign in page will open soon!');
        });
    }
}

// Mobile Drag Slider functionality - Only for Account Slider Section
function setupMobileDragSlider() {
    const accountSliderSection = document.querySelector('.account-slider-section .mobile-slider');
    if (!accountSliderSection) {
        console.log('Account Slider Section not found');
        return;
    }

    let isDown = false;
    let startX;
    let scrollLeft;

    // Mouse events for desktop testing
    accountSliderSection.addEventListener('mousedown', (e) => {
        isDown = true;
        accountSliderSection.classList.add('active');
        startX = e.pageX - accountSliderSection.offsetLeft;
        scrollLeft = accountSliderSection.scrollLeft;
    });

    accountSliderSection.addEventListener('mouseleave', () => {
        isDown = false;
        accountSliderSection.classList.remove('active');
    });

    accountSliderSection.addEventListener('mouseup', () => {
        isDown = false;
        accountSliderSection.classList.remove('active');
    });

    accountSliderSection.addEventListener('mousemove', (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - accountSliderSection.offsetLeft;
        const walk = (x - startX) * 2; // Scroll speed
        accountSliderSection.scrollLeft = scrollLeft - walk;
    });

    // Touch events for mobile
    accountSliderSection.addEventListener('touchstart', (e) => {
        isDown = true;
        accountSliderSection.classList.add('active');
        startX = e.touches[0].pageX - accountSliderSection.offsetLeft;
        scrollLeft = accountSliderSection.scrollLeft;
    });

    accountSliderSection.addEventListener('touchend', () => {
        isDown = false;
        accountSliderSection.classList.remove('active');
    });

    accountSliderSection.addEventListener('touchmove', (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.touches[0].pageX - accountSliderSection.offsetLeft;
        const walk = (x - startX) * 2;
        accountSliderSection.scrollLeft = scrollLeft - walk;
    });

    // Add smooth scrolling behavior
    accountSliderSection.style.scrollBehavior = 'smooth';

    // Ensure slider starts at the beginning
    accountSliderSection.scrollLeft = 0;

    // Add scroll snap indicators
    const cards = accountSliderSection.querySelectorAll('.card');
    cards.forEach((card, index) => {
        card.addEventListener('click', (e) => {
            // Only trigger if not dragging
            if (!isDown) {
                console.log(`Account Slider Card ${index + 1} clicked`);
                showSuccessMessage(`Opening tutorial ${index + 1}...`);
            }
        });
    });

    console.log('Account Slider drag functionality initialized');
}

// Add CSS animations for success messages
function addSuccessMessageStyles() {
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);
}

// Search Results Data - Sample data for demonstration
const searchResultsData = {
    flights: [
        {
            id: 1,
            airline: "Biman Bangladesh",
            flightNumber: "BG-123",
            departure: "DAC",
            arrival: "CXB",
            departureTime: "08:30",
            arrivalTime: "09:45",
            duration: "1h 15m",
            price: "BDT 8,500",
            stops: "Direct",
            aircraft: "ATR 72-600",
            class: "Economy"
        },
        {
            id: 2,
            airline: "NOVOAIR",
            flightNumber: "VQ-456",
            departure: "DAC",
            arrival: "CXB",
            departureTime: "10:15",
            arrivalTime: "11:30",
            duration: "1h 15m",
            price: "BDT 9,200",
            stops: "Direct",
            aircraft: "ATR 72-600",
            class: "Economy"
        },
        {
            id: 3,
            airline: "US-Bangla Airlines",
            flightNumber: "BS-789",
            departure: "DAC",
            arrival: "CXB",
            departureTime: "14:20",
            arrivalTime: "15:35",
            duration: "1h 15m",
            price: "BDT 7,800",
            stops: "Direct",
            aircraft: "ATR 72-600",
            class: "Economy"
        },
        {
            id: 4,
            airline: "Biman Bangladesh",
            flightNumber: "BG-234",
            departure: "DAC",
            arrival: "CXB",
            departureTime: "16:45",
            arrivalTime: "18:00",
            duration: "1h 15m",
            price: "BDT 8,900",
            stops: "Direct",
            aircraft: "ATR 72-600",
            class: "Economy"
        }
    ],
    hotels: [
        {
            id: 1,
            name: "Cox's Bazar Beach Resort",
            location: "Cox's Bazar Beach",
            rating: 4.5,
            price: "BDT 12,000",
            perNight: "per night",
            amenities: ["Free WiFi", "Beach Access", "Restaurant", "Pool"],
            image: "hotel-1.jpg",
            distance: "0.2 km from beach"
        },
        {
            id: 2,
            name: "Ocean Paradise Hotel",
            location: "Marine Drive, Cox's Bazar",
            rating: 4.2,
            price: "BDT 9,500",
            perNight: "per night",
            amenities: ["Free WiFi", "Ocean View", "Spa", "Gym"],
            image: "hotel-2.jpg",
            distance: "0.5 km from beach"
        },
        {
            id: 3,
            name: "Seaside Grand Hotel",
            location: "Kolatoli Beach",
            rating: 4.7,
            price: "BDT 15,000",
            perNight: "per night",
            amenities: ["Free WiFi", "Private Beach", "Restaurant", "Bar"],
            image: "hotel-3.jpg",
            distance: "0.1 km from beach"
        },
        {
            id: 4,
            name: "Coral Reef Resort",
            location: "Inani Beach",
            rating: 4.3,
            price: "BDT 11,500",
            perNight: "per night",
            amenities: ["Free WiFi", "Beach Access", "Restaurant", "Garden"],
            image: "hotel-4.jpg",
            distance: "0.3 km from beach"
        }
    ]
};

// Function to create search results modal
function createSearchResultsModal() {
    // Remove existing modal if any
    const existingModal = document.getElementById('searchResultsModal');
    if (existingModal) {
        existingModal.remove();
    }

    const modal = document.createElement('div');
    modal.id = 'searchResultsModal';
    modal.className = 'search-results-modal';
    modal.innerHTML = `
        <div class="search-results-overlay"></div>
        <div class="search-results-container">
            <div class="search-results-header">
                <h2>Flight Search Results</h2>
                <button class="close-results-btn" onclick="closeSearchResults()">×</button>
            </div>
            <div class="search-results-content">
                <div class="search-results-layout">
                    <!-- Left Sidebar - Filters -->
                    <div class="filters-sidebar">
                        <div class="filter-section">
                            <h3>Price Range</h3>
                            <div class="price-slider-container">
                                <input type="range" id="priceSlider" min="6000" max="11000" value="10732" class="price-slider">
                                <div class="price-range-display">
                                    <span>৳ 6,217.60</span>
                                    <span>৳ 10,732.11</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <h3>Baggage</h3>
                            <label class="filter-checkbox">
                                <input type="checkbox" checked>
                                <span class="checkmark"></span>
                                <span>20 Kg</span>
                            </label>
                        </div>
                        
                        <div class="filter-section">
                            <h3>No. of Steps</h3>
                            <div class="filter-options">
                                <!-- Will be populated dynamically -->
                            </div>
                        </div>
                        
                        <div class="filter-section">
                            <h3>Departure Timings</h3>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Early Morning (12 AM - 4 AM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Morning (4 AM - 8 AM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" checked>
                                <span class="checkmark"></span>
                                <span>Afternoon (8 AM - 4 PM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" checked>
                                <span class="checkmark"></span>
                                <span>Evening (4 PM - 8 PM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Night (8 PM - 11 PM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Midnight (11 PM - 12 AM)</span>
                            </label>
                        </div>
                        
                        <div class="filter-section">
                            <h3>Arrival Timings</h3>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Early Morning (12 AM - 4 AM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Morning (4 AM - 8 AM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" checked>
                                <span class="checkmark"></span>
                                <span>Afternoon (8 AM - 4 PM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" checked>
                                <span class="checkmark"></span>
                                <span>Evening (4 PM - 8 PM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Night (8 PM - 11 PM)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Midnight (11 PM - 12 AM)</span>
                            </label>
                        </div>
                        
                        <div class="filter-section">
                            <h3>Airlines</h3>
                            <label class="filter-checkbox">
                                <input type="checkbox" checked>
                                <span class="checkmark"></span>
                                <span>Air Astra</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>Biman Bangladesh</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>NOVOAIR</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox">
                                <span class="checkmark"></span>
                                <span>US-Bangla Airlines</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Right Main Content - Flight Results -->
                    <div class="flight-results-main">
                        <div class="results-grid" id="resultsGrid">
                            <!-- Results will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;

    document.body.appendChild(modal);
    return modal;
}

// Function to show flight search results
function showFlightResults() {
    const resultsGrid = document.getElementById('resultsGrid');
    if (!resultsGrid) return;

    resultsGrid.innerHTML = '';
    
    // Enhanced flight data matching the image
    const enhancedFlights = [
        {
            id: 1,
            airline: "Air Astra",
            airlineLogo: "🟡",
            flightNumber: "2A-123",
            baggage: "20 kg",
            class: "Economy (B)",
            departureTime: "13:10",
            departureDate: "Tue, 26 Aug 2025",
            departureCity: "Dhaka",
            departureAirport: "Hazrat Shahjalal International Airport",
            arrivalTime: "14:15",
            arrivalDate: "Tue, 26 Aug 2025",
            arrivalCity: "Cox's Bazar",
            arrivalAirport: "Cox's Bazar Airport",
            duration: "1H 5M",
            flightType: "Direct Flight",
            price: "৳ 10,732.11",
            refundable: "Partially Refundable"
        },
        {
            id: 2,
            airline: "Air Astra",
            airlineLogo: "🟡",
            flightNumber: "2A-456",
            baggage: "20 kg",
            class: "Economy (U)",
            departureTime: "17:00",
            departureDate: "Tue, 26 Aug 2025",
            departureCity: "Dhaka",
            departureAirport: "Hazrat Shahjalal International Airport",
            arrivalTime: "18:05",
            arrivalDate: "Tue, 26 Aug 2025",
            arrivalCity: "Cox's Bazar",
            arrivalAirport: "Cox's Bazar Airport",
            duration: "1H 5M",
            flightType: "Direct Flight",
            price: "৳ 8,675.96",
            refundable: "Partially Refundable"
        },
        {
            id: 3,
            airline: "Air Astra",
            airlineLogo: "🟡",
            flightNumber: "2A-789",
            baggage: "20 kg",
            class: "Economy (O)",
            departureTime: "09:30",
            departureDate: "Tue, 26 Aug 2025",
            departureCity: "Dhaka",
            departureAirport: "Hazrat Shahjalal International Airport",
            arrivalTime: "10:35",
            arrivalDate: "Tue, 26 Aug 2025",
            arrivalCity: "Cox's Bazar",
            arrivalAirport: "Cox's Bazar Airport",
            duration: "1H 5M",
            flightType: "Direct Flight",
            price: "৳ 6,418.20",
            refundable: "Partially Refundable"
        },
        {
            id: 4,
            airline: "Air Astra",
            airlineLogo: "🟡",
            flightNumber: "2A-101",
            baggage: "20 kg",
            class: "Economy (I)",
            departureTime: "11:45",
            departureDate: "Tue, 26 Aug 2025",
            departureCity: "Dhaka",
            departureAirport: "Hazrat Shahjalal International Airport",
            arrivalTime: "12:50",
            arrivalDate: "Tue, 26 Aug 2025",
            arrivalCity: "Cox's Bazar",
            arrivalAirport: "Cox's Bazar Airport",
            duration: "1H 5M",
            flightType: "Direct Flight",
            price: "৳ 6,217.60",
            refundable: "Partially Refundable"
        },
        {
            id: 5,
            airline: "Air Astra",
            airlineLogo: "🟡",
            flightNumber: "2A-202",
            baggage: "20 kg",
            class: "Economy (B)",
            departureTime: "15:20",
            departureDate: "Tue, 26 Aug 2025",
            departureCity: "Dhaka",
            departureAirport: "Hazrat Shahjalal International Airport",
            arrivalTime: "16:25",
            arrivalDate: "Tue, 26 Aug 2025",
            arrivalCity: "Cox's Bazar",
            arrivalAirport: "Cox's Bazar Airport",
            duration: "1H 5M",
            flightType: "Direct Flight",
            price: "৳ 7,850.00",
            refundable: "Partially Refundable"
        }
    ];
    
    enhancedFlights.forEach(flight => {
        const flightCard = document.createElement('div');
        flightCard.className = 'result-card flight-card-enhanced';
        flightCard.innerHTML = `
            <div class="flight-card-header">
                <div class="airline-section">
                    <div class="airline-logo">${flight.airlineLogo}</div>
                    <div class="airline-details">
                        <div class="airline-name">${flight.airline}</div>
                        <div class="baggage-class">
                            <span class="baggage-icon">🧳</span>
                            <span>: ${flight.baggage}</span>
                            <span class="class-type">${flight.class}</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flight-route-enhanced">
                <div class="departure-section">
                    <div class="time">${flight.departureTime}</div>
                    <div class="date">${flight.departureDate}</div>
                    <div class="city">${flight.departureCity}</div>
                    <div class="airport">${flight.departureAirport}</div>
                </div>
                
                <div class="flight-duration-section">
                    <div class="duration">${flight.duration}</div>
                    <div class="duration-line">
                        <div class="line"></div>
                        <div class="plane-icon">✈</div>
                    </div>
                    <div class="flight-type">${flight.flightType}</div>
                </div>
                
                <div class="arrival-section">
                    <div class="time">${flight.arrivalTime}</div>
                    <div class="date">${flight.arrivalDate}</div>
                    <div class="city">${flight.arrivalCity}</div>
                    <div class="airport">${flight.arrivalAirport}</div>
                </div>
            </div>
            
            <div class="flight-card-footer">
                <div class="price-section">
                    <div class="price">${flight.price}</div>
                </div>
                <div class="action-section">
                    <button class="select-flight-btn">Select</button>
                </div>
            </div>
            
            <div class="flight-details-expandable">
                <div class="refundable-info">
                    <span>${flight.refundable}</span>
                    <span class="expand-icon">▼</span>
                </div>
                <div class="flight-details-link">
                    <span>Flight Details</span>
                    <span class="expand-icon">▼</span>
                </div>
            </div>
        `;
        
        resultsGrid.appendChild(flightCard);
    });
}

// Function to show hotel search results
function showHotelResults() {
    const resultsGrid = document.getElementById('resultsGrid');
    if (!resultsGrid) return;

    resultsGrid.innerHTML = '';
    
    searchResultsData.hotels.forEach(hotel => {
        const hotelCard = document.createElement('div');
        hotelCard.className = 'result-card hotel-card';
        hotelCard.innerHTML = `
            <div class="hotel-image">
                <div class="hotel-placeholder">🏨</div>
            </div>
            <div class="hotel-content">
                <div class="hotel-header">
                    <div class="hotel-info">
                        <h3 class="hotel-name">${hotel.name}</h3>
                        <div class="hotel-location">${hotel.location}</div>
                        <div class="hotel-distance">${hotel.distance}</div>
                    </div>
                    <div class="hotel-rating">
                        <div class="stars">★★★★☆</div>
                        <div class="rating">${hotel.rating}</div>
                    </div>
                </div>
                <div class="hotel-amenities">
                    ${hotel.amenities.map(amenity => `<span class="amenity">${amenity}</span>`).join('')}
                </div>
                <div class="hotel-footer">
                    <div class="hotel-price">
                        <div class="price">${hotel.price}</div>
                        <div class="per-night">${hotel.perNight}</div>
                    </div>
                    <button class="select-hotel-btn">Select Hotel</button>
                </div>
            </div>
        `;
        
        resultsGrid.appendChild(hotelCard);
    });
}

// Function to show search results
function showSearchResults(searchType = 'flights') {
    const modal = createSearchResultsModal();
    
    // Show modal with animation
    setTimeout(() => {
        modal.classList.add('show');
    }, 10);
    
    // Show initial results
    showFlightResults();
    
    // Setup filter functionality
    setupFilterFunctionality();
    
    // Setup select buttons
    setTimeout(() => {
        const selectButtons = modal.querySelectorAll('.select-flight-btn');
        selectButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                showSuccessMessage('Flight selected! Redirecting to booking...');
                
                // Add visual feedback
                this.textContent = 'Selected!';
                this.style.background = '#4caf50';
                this.style.color = 'white';
                
                setTimeout(() => {
                    closeSearchResults();
                }, 1500);
            });
        });
        
        // Setup expandable details
        const expandableItems = modal.querySelectorAll('.refundable-info, .flight-details-link');
        expandableItems.forEach(item => {
            item.addEventListener('click', function() {
                const icon = this.querySelector('.expand-icon');
                if (icon) {
                    icon.style.transform = icon.style.transform === 'rotate(180deg)' ? 'rotate(0deg)' : 'rotate(180deg)';
                }
                showSuccessMessage('Details expanded!');
            });
        });
    }, 100);
}

// Function to setup filter functionality
function setupFilterFunctionality() {
    const priceSlider = document.getElementById('priceSlider');
    const filterCheckboxes = document.querySelectorAll('.filter-checkbox input[type="checkbox"]');
    
    // Price slider functionality
    if (priceSlider) {
        priceSlider.addEventListener('input', function() {
            const value = this.value;
            const priceDisplay = document.querySelector('.price-range-display span:last-child');
            if (priceDisplay) {
                priceDisplay.textContent = `৳ ${parseInt(value).toLocaleString()}.00`;
            }
            
            // Filter flights based on price
            filterFlightsByPrice(value);
        });
    }
    
    // Checkbox filter functionality
    filterCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            applyFilters();
        });
    });
}

// Function to filter flights by price
function filterFlightsByPrice(maxPrice) {
    const flightCards = document.querySelectorAll('.flight-card-enhanced');
    flightCards.forEach(card => {
        const priceElement = card.querySelector('.price');
        if (priceElement) {
            const price = parseInt(priceElement.textContent.replace(/[^\d]/g, ''));
            if (price <= maxPrice) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        }
    });
}

// Function to apply all filters
function applyFilters() {
    const selectedAirlines = Array.from(document.querySelectorAll('.filter-section:last-child input[type="checkbox"]:checked'))
        .map(cb => cb.parentElement.querySelector('span:last-child').textContent);
    
    const flightCards = document.querySelectorAll('.flight-card-enhanced');
    flightCards.forEach(card => {
        const airlineName = card.querySelector('.airline-name').textContent;
        if (selectedAirlines.length === 0 || selectedAirlines.includes(airlineName)) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
}

// Function to close search results
function closeSearchResults() {
    const modal = document.getElementById('searchResultsModal');
    if (modal) {
        modal.classList.remove('show');
        setTimeout(() => {
            modal.remove();
        }, 300);
    }
}

// Hotel form functionality
function setupHotelForm() {
    const hotelForm = document.getElementById('hotelForm');
    if (!hotelForm) {
        console.error('Hotel form not found');
        return;
    }
    
    console.log('Hotel form found, setting up functionality...');
    
    // Make hotel form fields interactive
    setupHotelCitySelection();
    setupHotelDateSelection();
    setupHotelRoomsGuests();
    
    // Hotel form submission
    hotelForm.addEventListener('submit', function(e) {
        e.preventDefault();
        console.log('Hotel booking form submitted');
        
        // Get selected search for options
        const selectedOptions = document.querySelectorAll('input[name="searchFor"]:checked');
        const selectedValues = Array.from(selectedOptions).map(option => option.value);
        console.log('Search for options selected:', selectedValues);
        
        // Show success message
        showSuccessMessage('Searching for hotels...');
        
        // Add visual feedback to the button
        const searchBtn = this.querySelector('.search-btn');
        if (searchBtn) {
            searchBtn.textContent = 'Searching...';
            searchBtn.style.background = '#4caf50';
            searchBtn.style.color = 'white';
            
            // Reset button after 2 seconds
            setTimeout(() => {
                searchBtn.textContent = 'Search';
                searchBtn.style.background = '';
                searchBtn.style.color = '';
                
                // Show hotel search results
                showSearchResults('hotels');
            }, 2000);
        }
    });
    
    console.log('Hotel form functionality setup complete');
}

// Setup hotel city selection
function setupHotelCitySelection() {
    const cityField = document.querySelector('.hotel-form .form-group:first-child');
    if (!cityField) {
        console.error('City field not found in hotel form');
        return;
    }
    console.log('City field found, setting up dropdown...');
    
    const mainValue = cityField.querySelector('.main-value');
    const formDesc = cityField.querySelector('.form-desc');
    
    // Create dropdown
    const dropdown = document.createElement('div');
    dropdown.className = 'hotel-dropdown city-dropdown';
    dropdown.style.display = 'none';
    
    const cities = [
        { name: "Cox's Bazar", country: 'Bangladesh', type: 'Resort Area' },
        { name: 'Dhaka', country: 'Bangladesh', type: 'Capital City' },
        { name: 'Chittagong', country: 'Bangladesh', type: 'Port City' },
        { name: 'Sylhet', country: 'Bangladesh', type: 'Tea City' },
        { name: 'Rangamati', country: 'Bangladesh', type: 'Hill Station' },
        { name: 'Bandarban', country: 'Bangladesh', type: 'Hill Station' },
        { name: 'Kuakata', country: 'Bangladesh', type: 'Beach Resort' },
        { name: 'Saint Martin', country: 'Bangladesh', type: 'Island Resort' },
        { name: 'Dubai', country: 'UAE', type: 'Metropolitan City' },
        { name: 'Abu Dhabi', country: 'UAE', type: 'Capital City' },
        { name: 'Doha', country: 'Qatar', type: 'Capital City' },
        { name: 'Kuala Lumpur', country: 'Malaysia', type: 'Capital City' },
        { name: 'Singapore', country: 'Singapore', type: 'City State' },
        { name: 'Bangkok', country: 'Thailand', type: 'Capital City' },
        { name: 'London', country: 'UK', type: 'Capital City' },
        { name: 'New York', country: 'USA', type: 'Metropolitan City' },
        { name: 'Paris', country: 'France', type: 'Capital City' },
        { name: 'Tokyo', country: 'Japan', type: 'Capital City' }
    ];
    
    dropdown.innerHTML = cities.map(city => `
        <div class="hotel-option" data-city="${city.name}" data-country="${city.country}">
            <div class="hotel-option-icon">🏨</div>
            <div class="hotel-option-details">
                <div class="hotel-option-main">${city.name}</div>
                <div class="hotel-option-sub">${city.country} • ${city.type}</div>
            </div>
        </div>
    `).join('');
    
    cityField.appendChild(dropdown);
    
    // Make field clickable
    cityField.style.cursor = 'pointer';
    cityField.addEventListener('click', function(e) {
        console.log('City field clicked');
        if (e.target.closest('.hotel-dropdown')) return;
        
        const isVisible = dropdown.style.display === 'block';
        closeAllHotelDropdowns();
        
        if (!isVisible) {
            dropdown.style.display = 'block';
            cityField.classList.add('active');
            console.log('City dropdown opened');
        }
    });
    
    // Handle option selection
    dropdown.addEventListener('click', function(e) {
        const option = e.target.closest('.hotel-option');
        if (option) {
            const city = option.dataset.city;
            const country = option.dataset.country;
            
            mainValue.textContent = city;
            formDesc.textContent = country;
            
            dropdown.style.display = 'none';
            cityField.classList.remove('active');
        }
    });
}

// Setup hotel date selection
function setupHotelDateSelection() {
    const checkInField = document.querySelector('.hotel-form .form-group:nth-child(2)');
    const checkOutField = document.querySelector('.hotel-form .form-group:nth-child(3)');
    
    if (!checkInField || !checkOutField) {
        console.error('Check-in or check-out field not found in hotel form');
        return;
    }
    console.log('Date fields found, setting up date pickers...');
    
    // Make fields clickable
    [checkInField, checkOutField].forEach(field => {
        field.style.cursor = 'pointer';
        field.addEventListener('click', function() {
            const isCheckIn = this === checkInField;
            console.log(`${isCheckIn ? 'Check-in' : 'Check-out'} field clicked`);
            const label = isCheckIn ? 'CHECK IN' : 'CHECK OUT';
            
            // Create date picker
            const datePicker = document.createElement('input');
            datePicker.type = 'date';
            datePicker.className = 'hotel-date-picker';
            datePicker.style.position = 'absolute';
            datePicker.style.top = '0';
            datePicker.style.left = '0';
            datePicker.style.width = '100%';
            datePicker.style.height = '100%';
            datePicker.style.opacity = '0';
            datePicker.style.cursor = 'pointer';
            
            // Set default dates
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            if (isCheckIn) {
                datePicker.value = today.toISOString().split('T')[0];
            } else {
                datePicker.value = tomorrow.toISOString().split('T')[0];
            }
            
            this.appendChild(datePicker);
            
            datePicker.addEventListener('change', function() {
                const selectedDate = new Date(this.value);
                const day = selectedDate.getDate();
                const month = selectedDate.toLocaleDateString('en-US', { month: 'short' });
                const year = selectedDate.getFullYear().toString().slice(-2);
                const dayName = selectedDate.toLocaleDateString('en-US', { weekday: 'long' });
                
                const mainValue = field.querySelector('.main-value');
                const formDesc = field.querySelector('.form-desc');
                
                mainValue.innerHTML = `${day} <span class="date-month">${month}'${year}</span>`;
                formDesc.textContent = dayName;
                
                this.remove();
            });
            
            datePicker.click();
        });
    });
}

// Setup hotel rooms and guests selection
function setupHotelRoomsGuests() {
    const roomsField = document.querySelector('.hotel-form .form-group:nth-child(4)');
    if (!roomsField) {
        console.error('Rooms field not found in hotel form');
        return;
    }
    console.log('Rooms field found, setting up dropdown...');
    
    const mainValue = roomsField.querySelector('.main-value');
    const formDesc = roomsField.querySelector('.form-desc');
    
    // Create dropdown
    const dropdown = document.createElement('div');
    dropdown.className = 'hotel-dropdown rooms-dropdown';
    dropdown.style.display = 'none';
    
    const roomOptions = [
        { rooms: 1, guests: 1, adults: 1, children: 0 },
        { rooms: 1, guests: 2, adults: 2, children: 0 },
        { rooms: 1, guests: 3, adults: 2, children: 1 },
        { rooms: 1, guests: 4, adults: 2, children: 2 },
        { rooms: 2, guests: 2, adults: 2, children: 0 },
        { rooms: 2, guests: 3, adults: 2, children: 1 },
        { rooms: 2, guests: 4, adults: 2, children: 2 },
        { rooms: 2, guests: 5, adults: 3, children: 2 },
        { rooms: 2, guests: 6, adults: 4, children: 2 },
        { rooms: 3, guests: 3, adults: 3, children: 0 },
        { rooms: 3, guests: 4, adults: 3, children: 1 },
        { rooms: 3, guests: 5, adults: 3, children: 2 },
        { rooms: 3, guests: 6, adults: 4, children: 2 }
    ];
    
    dropdown.innerHTML = roomOptions.map(option => `
        <div class="hotel-option" data-rooms="${option.rooms}" data-guests="${option.guests}" data-adults="${option.adults}" data-children="${option.children}">
            <div class="hotel-option-icon">🛏️</div>
            <div class="hotel-option-details">
                <div class="hotel-option-main">${option.rooms} Room${option.rooms > 1 ? 's' : ''}, ${option.guests} Guest${option.guests > 1 ? 's' : ''}</div>
                <div class="hotel-option-sub">${option.adults} Adult${option.adults > 1 ? 's' : ''}${option.children > 0 ? `, ${option.children} Child${option.children > 1 ? 'ren' : ''}` : ''}</div>
            </div>
        </div>
    `).join('');
    
    roomsField.appendChild(dropdown);
    
    // Make field clickable
    roomsField.style.cursor = 'pointer';
    roomsField.addEventListener('click', function(e) {
        console.log('Rooms field clicked');
        if (e.target.closest('.hotel-dropdown')) return;
        
        const isVisible = dropdown.style.display === 'block';
        closeAllHotelDropdowns();
        
        if (!isVisible) {
            dropdown.style.display = 'block';
            roomsField.classList.add('active');
            console.log('Rooms dropdown opened');
        }
    });
    
    // Handle option selection
    dropdown.addEventListener('click', function(e) {
        const option = e.target.closest('.hotel-option');
        if (option) {
            const rooms = option.dataset.rooms;
            const guests = option.dataset.guests;
            const adults = option.dataset.adults;
            const children = option.dataset.children;
            
            mainValue.textContent = `${rooms} Room${rooms > 1 ? 's' : ''}, ${guests} Guest${guests > 1 ? 's' : ''}`;
            formDesc.textContent = `${adults} Adult${adults > 1 ? 's' : ''}${children > 0 ? `, ${children} Child${children > 1 ? 'ren' : ''}` : ''}`;
            
            dropdown.style.display = 'none';
            roomsField.classList.remove('active');
        }
    });
}

// Close all hotel dropdowns
function closeAllHotelDropdowns() {
    document.querySelectorAll('.hotel-dropdown').forEach(dropdown => {
        dropdown.style.display = 'none';
    });
    document.querySelectorAll('.hotel-form .form-group').forEach(field => {
        field.classList.remove('active');
    });
}

// Close dropdowns when clicking outside
document.addEventListener('click', function(e) {
    if (!e.target.closest('.hotel-form .form-group')) {
        closeAllHotelDropdowns();
    }
});

// Promotional Carousel functionality
function setupPromotionalCarousel() {
    const carousel = document.querySelector('.promotional-carousel-section');
    if (!carousel) {
        console.log('Promotional carousel not found');
        return;
    }
    
    const slidesContainer = carousel.querySelector('.carousel-slides');
    let slides = Array.from(carousel.querySelectorAll('.carousel-slide'));
    const indicatorsContainer = carousel.querySelector('.carousel-indicators');
    const prevBtn = carousel.querySelector('.carousel-prev');
    const nextBtn = carousel.querySelector('.carousel-next');
    
    let currentSlide = 0;
    let totalSlides = slides.length;

    // Build indicators dynamically
    function rebuildIndicators() {
        if (!indicatorsContainer) return;
        indicatorsContainer.innerHTML = '';
        slides.forEach((_, idx) => {
            const dot = document.createElement('button');
            dot.className = 'indicator' + (idx === currentSlide ? ' active' : '');
            dot.setAttribute('data-slide', String(idx));
            dot.addEventListener('click', () => showSlide(idx));
            indicatorsContainer.appendChild(dot);
        });
    }
    
    function showSlide(index) {
        // Remove active class from all slides and indicators
        slides.forEach(slide => slide.classList.remove('active'));
        const indicators = indicatorsContainer ? indicatorsContainer.querySelectorAll('.indicator') : [];
        
        // Add active class to current slide and indicator
        slides[index].classList.add('active');
        if (indicators[index]) indicators[index].classList.add('active');
        
        currentSlide = index;
        // Snap scroll so active slide is fully visible
        const slide = slides[index];
        if (slide && slidesContainer) {
            const left = slide.offsetLeft - slidesContainer.offsetLeft;
            slidesContainer.scrollTo({ left, behavior: 'smooth' });
        }
    }
    
    function nextSlide() {
        const nextIndex = (currentSlide + 1) % totalSlides;
        showSlide(nextIndex);
    }
    
    function prevSlide() {
        const prevIndex = (currentSlide - 1 + totalSlides) % totalSlides;
        showSlide(prevIndex);
    }
    
    // Event listeners for navigation buttons
    if (nextBtn) {
        nextBtn.addEventListener('click', nextSlide);
    }
    
    if (prevBtn) {
        prevBtn.addEventListener('click', prevSlide);
    }
    
    rebuildIndicators();
    
    // Auto-play functionality
    let autoPlayInterval;
    
    function startAutoPlay() {
        autoPlayInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
    }
    
    function stopAutoPlay() {
        if (autoPlayInterval) {
            clearInterval(autoPlayInterval);
        }
    }
    
    // Start auto-play
    startAutoPlay();
    
    // Pause auto-play on hover
    carousel.addEventListener('mouseenter', stopAutoPlay);
    carousel.addEventListener('mouseleave', startAutoPlay);
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft') {
            prevSlide();
        } else if (e.key === 'ArrowRight') {
            nextSlide();
        }
    });
    
    console.log('Promotional carousel setup complete');
}

// Auto-hide header on scroll down, show on scroll up
function setupHideHeaderOnScroll() {
    const header = document.querySelector('.akij-header');
    if (!header) return;
    let lastY = window.scrollY;
    let ticking = false;

    function onScroll() {
        const currentY = window.scrollY;
        const scrollingDown = currentY > lastY && currentY > 40; // ignore tiny scroll near top
        header.classList.toggle('hide', scrollingDown);
        lastY = currentY;
        ticking = false;
    }

    window.addEventListener('scroll', function() {
        if (!ticking) {
            window.requestAnimationFrame(onScroll);
            ticking = true;
        }
    }, { passive: true });
}

document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, setting up all functionality...');
    
    // Add success message styles
    addSuccessMessageStyles();
    
    // Setup all functionality
    setupLanguageModal();
    setupBookingTabs();
    setupRegionCurrencyPopup();
    setupBookingForm();
    setupLocationSearch();
    setupHotelForm();
    setupFlightOptions();
    setupSearchForCheckboxes();
    setupInfoCardButtons();
    setupSignInButton();
    setupMobileDragSlider();
    setupHideHeaderOnScroll();
    setupPromotionalCarousel();
    
    // Additional debugging for search functionality
    console.log('Search buttons found:', document.querySelectorAll('.search-btn').length);
    console.log('Flight form found:', !!document.getElementById('flightForm'));
    console.log('Hotel form found:', !!document.getElementById('hotelForm'));
    
    // Check if forms are visible
    const flightForm = document.getElementById('flightForm');
    const hotelForm = document.getElementById('hotelForm');
    if (flightForm) {
        console.log('Flight form display style:', flightForm.style.display);
        console.log('Flight form computed display:', window.getComputedStyle(flightForm).display);
    }
    if (hotelForm) {
        console.log('Hotel form display style:', hotelForm.style.display);
        console.log('Hotel form computed display:', window.getComputedStyle(hotelForm).display);
    }
    
    // Check search button properties
    const searchButtons = document.querySelectorAll('.search-btn');
    searchButtons.forEach((btn, index) => {
        const computedStyle = window.getComputedStyle(btn);
        console.log(`Search button ${index + 1}:`, {
            pointerEvents: computedStyle.pointerEvents,
            cursor: computedStyle.cursor,
            display: computedStyle.display,
            visibility: computedStyle.visibility,
            opacity: computedStyle.opacity
        });
    });
    
    // Contact form functionality
    const form = document.getElementById('contactForm');
    const formMessage = document.getElementById('formMessage');

    if (form && formMessage) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Contact form submitted');
            
            // Simple validation
            const name = form.name.value.trim();
            const email = form.email.value.trim();
            const message = form.message.value.trim();
            
            if (!name || !email || !message) {
                formMessage.textContent = 'Please fill in all fields.';
                formMessage.style.color = '#d32f2f';
                return;
            }
            
            // Simulate successful submission
            formMessage.textContent = 'Thank you for contacting us, ' + name + '! We will get back to you soon.';
            formMessage.style.color = '#003366';
            form.reset();
            
            console.log('Contact form submitted successfully');
        });
    }
    
    console.log('All functionality setup complete!');
    
    // Global search button test
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('search-btn')) {
            console.log('Global search button click detected:', e.target.textContent);
        }
    });
    
    // Close search results when clicking outside
    document.addEventListener('click', function(e) {
        const modal = document.getElementById('searchResultsModal');
        if (modal && !modal.querySelector('.search-results-container').contains(e.target) && !e.target.classList.contains('search-btn')) {
            closeSearchResults();
        }
    });
    
    // Close search results with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeSearchResults();
        }
    });
}); 